!function(a,b,c){!c&&(a.rd=c={}),["log","warn","error","debug","info"].forEach(function(b){c[b]=function(){return a.console&&b in console&&Function.apply.call(console[b],console,arguments)}})}(window,document,window.rd),function(a,b,c){function d(a,c,d){if(arguments.length>1&&"[object Object]"!==String(c)){if(!d&&(d={}),(null===c||void 0===c)&&(d.expires=-1),!isNaN(parseInt(d.expires))&&0!==d.expires){var e=d.expires,f=d.expires=new Date;e>1e3?f.setTime(e):f.setDate(f.getDate()+e)}return c=String(c),b.cookie=[encodeURIComponent(a),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g,h=d.raw?function(a){return a}:decodeURIComponent;return(g=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(b.cookie))?h(g[1]):null}!c&&(a.rd=c={}),c.cookie=c.cookie=d}(window,document,window.rd),function(a,b,c){function d(){if(!a.localStorage||!a.sessionStorage)return!1;var b="RD.DB.TEST."+Math.random().toString().substr(2);try{sessionStorage[b]="1",sessionStorage.removeItem(b)}catch(c){return!1}return!0}function e(){return 1==arguments.length?"string"==typeof arguments[0]?g(arguments[0]):f(arguments[0]):arguments.length>1?h.apply(this,Array.prototype.slice.call(arguments)):!1}function f(a){j=c.extend({},j,a)}function g(a){var b;if(a=j.prefix+a,k){try{b=JSON.parse(localStorage[a]||sessionStorage[a])}catch(d){}return b&&"d"in b?b.t>0&&b.t<(new Date).getTime()?(localStorage.removeItem(a),sessionStorage.removeItem(a),null):b.d:null}try{b=JSON.parse(c.cookie(a))}catch(d){}return b||null}function h(a,b,d){var e=(new Date).getTime();if(a=j.prefix+a,d=parseInt(d),d=d>0?e>d?d+e:d:0,k){if(null===b||void 0===b)return localStorage.removeItem(a),sessionStorage.removeItem(a),!0;var f={d:b,t:d},g=d?localStorage:sessionStorage;return localStorage.removeItem(a),g[a]=JSON.stringify(f),setTimeout(i,10),!0}return c.cookie(a,JSON.stringify(b),{expires:d})?!0:!1}function i(){if(!j.gc||!j.gc_key||!k)return!1;var a=localStorage[j.gc_key]=parseInt(localStorage[j.gc_key])+1;if(a<j.gc)return!1;localStorage[j.gc_key]=0;var b=(new Date).getTime();for(var c in localStorage){var d=null;if(!j.prefix||0===c.indexOf(j.prefix)){try{d=JSON.parse(localStorage[c])}catch(e){}d&&d.t&&d.t<b&&localStorage.removeItem(c)}}}!c&&(a.rd=c={});var j={prefix:"",gc:2,gc_key:"_gc"},k=d();c.db=e}(window,document,window.rd),function(a,b,c,d,e,f){function g(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function h(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}function i(c){b(a).scrollTop(c||0)}function j(){var a,c=[];return arguments.length?(Array.prototype.push.apply(c,arguments),a=c.shift(),!a||!a in j||!b.isFunction(j[a])?!1:j[a].apply(this,c)):!1}function k(a){var c=!!rd.db("ineligible"),d=l();return d?void(c?(a&&b("#thanks h2").html("You have already entered today."),b(".frame").hide(),b("#thanks").show(),b(".carousel, #winners, .see_all_prizes").hide()):(b(".frame").hide(),b("#prize").show())):(b(".frame").hide(),b("#signup").show(),b("#login_email").trigger("focus"),void q(F))}function l(){return 1==rd.db("lis")}function m(){b.ajax({type:"POST",url:"/api/eligible",dataType:"json"}).done(function(a){return a&&a.status&&a.status==C?(y.show(),rd.db("lis",1,A),rd.db("user_id",a.user_id,A),void rd.db("ineligible",!a.eligible,1e3*a.midnight)):n()})}function n(){return b.ajax({type:"POST",url:"/api/logout",dataType:"json"}).done(function(){y.hide(),rd.db("lis",null),rd.db("user_id",null),rd.db("name",null),rd.db("ineligible",null),rd.cookie("sid",null),w=null,x.html(""),q(Q)}),!1}function o(){function a(a){return a.err?c(a.msg):(z.html("Verification email sent."),void q(O))}function c(){z.html("Failed to send, please try again later.")}return b.ajax({type:"POST",url:"/api/verify",dataType:"json"}).done(a).fail(c),!1}function p(c,d){function e(a,b){var c={event:a};return b!==!1&&rd.db("user_id")&&(c.userId=rd.db("user_id")),S.push(c)}function f(a){function c(){p.initializing=!1,p.initialized=!0}function d(a,b,c){p.initializing=!1,rd.error("GTM failed to load:",c)}return a?void(p.initializing||(p.initializing=!0,b.ajax({url:"//www.googletagmanager.com/gtm.js?id="+a,dataType:"script",cache:!0}).done(c).fail(d))):void rd.error('jds.gtm() called without an "id" param')}return p.initialized||"string"!==b.type(c)||0!==c.indexOf("GTM-")?e(c,d):(a[R]||(S=a[R]=[{"gtm.start":(new Date).getTime(),event:"gtm.js"}]),f(c))}function q(a){var b=!p(a);j.refreshAds(),rd[b?"log":"warn"]("GTM "+a+": "+(b?"successfully matched":"FAILED to match against")+" a GTM event")}function r(c){function d(a){return r.callback=a,i?(b(document).on("keyup",e),k.show(),f(),!1):(w=!0,rd.error("SolveMedia.fire executed, but ACPuzzle not ready :("),!1)}function e(a){return 27==a.which?(g(),!1):!0}function f(){i.focus_response_field()}function g(){b(document).off("keyup",e),b("#solvemedia").hide()}function h(a){var c=b(a.target);switch(c.attr("id")||c[0].nodeName){case"adcopy-link-refresh":i.reload(),f();break;case"adcopy-link-audio":i.change2audio(),f();break;case"adcopy-link-image":i.change2image(),f();break;case"adcopy-link-info":case"I":i.moreinfo();break;case"solvemedia":case"B":g();break;default:return!0}return!1}if(!c)return rd.warn("Could not initialize SolveMedia roadblock. No key provided."),!1;var i,j="//api.solvemedia.com/papi/_puzzle.js",k=b("#solvemedia");a.ACPuzzleInfo={protocol:window.location.protocol.match(/^https?:$/)?"":"http:",apiserver:"//api.solvemedia.com",mediaserver:"//api.solvemedia.com",magic:"u7WpnzA6KVaLL0XYMDopVg",chalapi:"ajax",chalstamp:1424984044,lang:"en",size:"standard",theme:"custom",type:"img",onload:null},b.ajax({url:j,dataType:"script",cache:!0}).fail(function(){rd.error("Failed to load SolveMedia JS: "+j)}).done(function(){i=a.ACPuzzle,i.create(c)}),k.on("click",h),k.find("form").on("submit",{success:function(){w=!0,g(),"function"==b.type(r.callback)&&r.callback()},fail:function(){return i.reload(),!1}},u),r.fire=d}function s(){function a(){var a=u.position(),b=a&&a.left+p.scrollLeft();k=u.width(),g=b+k,i=o.width(),j=g-i+0,l=Math.round(i/k)}function c(){var a=p.scrollLeft()-.63*i;0>=a?(a=0,o.addClass(m),o.removeClass(n)):o.removeClass(m),p.animate({scrollLeft:a},400)}function d(){var a=p.scrollLeft()+.63*i;a>=j?(a=j+1,o.addClass(n),o.removeClass(m)):o.removeClass(n),p.animate({scrollLeft:a},400)}function e(){var a=p.scrollLeft();a>=j?o.addClass(n):0>=a?o.addClass(m):o.removeClass(m).removeClass(n);for(var c=Math.round(a/k),d=1>=c?0:c-1,e=d+l+2,f=d;e>=f;f++){var g=b(t[f]);if(g.length&&!g.data("loaded")){var h=g.find("img");h.attr("src",h.data("src")).data("src",!1).removeClass("ajax-loader"),g.addClass("loaded").data("loaded",!0)}}}function f(){a()}var g,i,j,k,l,m="flush_left",n="flush_right",o=b(".carousel"),p=o.find(".wrap"),q=o.find(".prev"),r=o.find(".next"),s=o.find(".today"),t=p.children(),u=b(t[t.length-1]);if(a(),o.length){var v,w=s.position();v=w?w.left+k/2-i/2:0,p.scrollLeft(v),e(),q.on("selectstart touchstart",h(c,450)),r.on("selectstart touchstart",h(d,450)),p.on("scroll",h(e,200)),b("window").on("resize",f)}}function t(){function a(a){a=parseInt(a),f.attr("src",i[k[a-1]]),h.html(j[k[a-1]]),e.removeClass("cur"+m).addClass("cur"+a),m=a}function c(b){b.preventDefault(),b.stopPropagation(),a(1>=m?l:m-1)}function d(b){b.preventDefault(),b.stopPropagation(),a(m>=l?1:m+1)}var e=b(".prize"),f=e.find("img"),h=b(e.find("p")[0]),i={1:f.attr("src")},j={1:h.html()},k=[1],l=1,m=1;if(e.length){var n;(n=f.data("img2"))&&(i[2]=n),(n=f.data("img3"))&&(i[3]=n),(n=h.data("desc2"))&&(j[2]=n),(n=h.data("desc3"))&&(j[3]=n);for(var o=2;3>=o;o++)(i[o]||j[o])&&(k.push(o),i[o]||(i[o]=i[o-1]),j[o]||(j[o]=j[o-1]));if(1!=(l=k.length)){e.addClass("slideshow").append(b('<b class="prev">').on("selectstart touchstart",g(c,100,!0))).append(b('<b class="next">').on("selectstart touchstart",g(d,100,!0)));for(var p=b('<div class="dots">'),o=1;l>=o;o++)p.append(b("<i>").data("cur",o));e.addClass("cur1").append(p),p.on("touchstart selectstart","i",g(function(){a(b(this).data("cur"))},100,!0))}}}function u(a){function c(){l.removeClass("on"),i.removeClass("loading"),k.attr("disabled",null)}function d(a){if(c(),b(".logo").trigger("focus").trigger("blur"),!a||!1 in a||a.status!==C){switch(a.status){case D:n();break;case E:j.roadblock(function(){i.trigger("submit")})}return m.html(a.message||B).show(),g(a)}return f(a)}function e(){return c(),b(".logo").trigger("focus"),m.html(B).show(),g()}a.preventDefault();var f=a.data&&a.data.success||function(){},g=a.data&&a.data.fail||function(){},h=a.data&&a.data.prereq||function(){return!0},i=u.$form=b(this).addClass("loading"),k=u.$submit=i.find('input[type="submit"]').attr("disabled","disabled"),l=i.find("loader").addClass("on"),m=u.$alert=i.find(".alert").empty().hide();return h(a)?(b.ajax({type:"POST",url:i.attr("action"),data:i.serialize(),dataType:"json"}).done(d).fail(e),!1):(c(),!1)}function v(){function c(){b(".ad").each(function(a,c){var d=b(c);d.data("id")&&(d.empty(),d.append(b("<div>").attr("id",d.data("id"))))})}function d(){c(),f.forEach(function(b){a.OX.load(b)})}b("#login_form").on("submit",{success:function(a){return i(0),w=null,rd.db("lis",1,A),rd.db("user_id",a.user_id,A),rd.db("name",a.name,A),x.html(a.name),y.show(),q(I),a.eligible?k():(rd.db("ineligible",!0,1e3*a.midnight),k(!0),q(L)),!1},fail:function(){q(J)}},u),b("#signup_form").on("submit",{success:function(a){return i(0),w=null,rd.db("lis",1,A),rd.db("user_id",a.user_id,A),a.name&&rd.db("name",a.name,A),x.html(rd.db("name")),y.show(),u.$form.trigger("reset"),u.$form.hasClass("profile")?(q(P),window.location.href=window.location.href):(q(G),k()),!1},fail:function(){q(H)}},u),b("#forgot_form").on("submit",{success:function(a){return u.$alert.show().html(a.msg),u.$form.trigger("reset"),u.$form.find("fieldset.login").hide(),u.$form.find("p").hide(),u.$submit.hide(),u.$form.find(".forgot_close").html("Dismiss"),q(M),!1}},u),b("#reset_form").on("submit",{success:function(a){return i(0),u.$alert.show().html(a.msg),u.$form.trigger("reset"),u.$form.find("fieldset, input").hide(),u.$form.find(".success").show(),q(N),!1}},u),b("#prize_form").on("submit",{prereq:function(){return l()?rd.db("ineligible")?(k(!0),q(L),!1):!0:(k(),!1)},success:function(a){i(0),w=null,rd.db("ineligible",!0,1e3*a.midnight),k(),q(K)}},u),y=b(".account"),x=b(y.find("a")[0]),x.html(rd.db("name")),b(".logout").on("click",n),b("a.forgot").on("click",function(){b("#signup").addClass("forgot"),b("#login_form").find(".alert").empty(),b("#forgot_email").trigger("focus")}),b("a.forgot_close").on("click",function(){b("#signup").removeClass("forgot");var a=b("#forgot_form");a.trigger("reset"),a.find("fieldset, input").show(),a.find("p").show(),a.find(".success").hide(),a.find(".alert").empty(),b("#login_email").trigger("focus")}),z=b(".verify"),z.find("a").on("click",o),s(),t(),j.roadblock=r.fire,l()&&(y.show(),rd.db("ineligible")||m()),b("body>header .menu").on("touchstart selectstart click",g(function(a){a.preventDefault(),b(this).closest("header").toggleClass("open")},100,!0));{var e=4e3,f=[];j.refreshAds=h(d,e)}c(),b.ajax({url:"//cdn.yldbt.com/js/yieldbot.intent.js",dataType:"script",cache:!0}).done(function(){rd.log("Yieldbot loaded.");var c=a.yieldbot;c.pub("d45f"),c.defineSlot("LB"),c.defineSlot("MR"),c.enableAsync(),c.go(),a.OX_ads=[{slot_id:"537278266_728x90_ATF",auid:"537278266",vars:c.getSlotCriteria("LB")},{slot_id:"537278268_300x250_ATF",auid:"537278268",vars:c.getSlotCriteria("MR")},{slot_id:"537278269_300x250_BTF",auid:"537278269"},{slot_id:"537278267_728x90_BTF",auid:"537278267"}],b.extend(!0,f,a.OX_ads),b.ajax({url:"//ox-d.junemedia.com/w/1.0/jstag",dataType:"script",cache:!0}).done(function(){rd.log("OpenX JavaScript Loaded")}).fail(function(){rd.error("OpenX JavaScript failed to load")})}).fail(function(){rd.error("Yieldbot failed to load")})}var w,x,y,z,A=31536e6,B="An unexpected error has occurred. Please try again.",C=1,D=3,E=9,F="enterAnonymous",G="signup",H="signupFail",I="login",J="loginFail",K="enter",L="enterDuplicate",M="forgot",N="reset",O="verifyRequest",P="profileUpdate",Q="logout",R="dataLayer",S=a[R];j.gtm=p,j.track=q,j.solvemedia=r,f=0,(d=function(){return a[b]?(e&&clearInterval(e),b=a[b],a[c]&&a[c].q&&a[c].q.forEach(function(b){j.apply(a,b)}),a[c]=j,void b(v)):void(!f++&&(e=setInterval(d,16)))})()}(window,"jQuery","jds");