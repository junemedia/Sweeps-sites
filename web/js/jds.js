"use strict";!function(a,b,c){!c&&(a.rd=c={}),["log","warn","error","debug","info"].forEach(function(b){c[b]=function(){return a.console&&b in console&&Function.apply.call(console[b],console,arguments)}})}(window,document,window.rd),function(a,b,c){function d(a,c,d){if(arguments.length>1&&"[object Object]"!==String(c)){if(!d&&(d={}),(null===c||void 0===c)&&(d.expires=-1),!isNaN(parseInt(d.expires))&&0!==d.expires){var e=d.expires,f=d.expires=new Date;e>1e3?f.setTime(e):f.setDate(f.getDate()+e)}return c=String(c),b.cookie=[encodeURIComponent(a),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g,h=d.raw?function(a){return a}:decodeURIComponent;return(g=new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)").exec(b.cookie))?h(g[1]):null}!c&&(a.rd=c={}),c.cookie=c.cookie=d}(window,document,window.rd),function(a,b,c){function d(){if(!a.localStorage||!a.sessionStorage)return!1;var b="RD.DB.TEST."+Math.random().toString().substr(2);try{sessionStorage[b]="1",sessionStorage.removeItem(b)}catch(c){return!1}return!0}function e(){return 1==arguments.length?"string"==typeof arguments[0]?g(arguments[0]):f(arguments[0]):arguments.length>1?h.apply(this,Array.prototype.slice.call(arguments)):!1}function f(a){j=c.extend({},j,a)}function g(a){var b;if(a=j.prefix+a,k){try{b=JSON.parse(localStorage[a]||sessionStorage[a])}catch(d){}return b&&"d"in b?b.t>0&&b.t<(new Date).getTime()?(localStorage.removeItem(a),sessionStorage.removeItem(a),null):b.d:null}try{b=JSON.parse(c.cookie(a))}catch(d){}return b||null}function h(a,b,d){var e=(new Date).getTime();if(a=j.prefix+a,d=parseInt(d),d=d>0?e>d?d+e:d:0,k){if(null===b||void 0===b)return localStorage.removeItem(a),sessionStorage.removeItem(a),!0;var f={d:b,t:d},g=d?localStorage:sessionStorage;return localStorage.removeItem(a),g[a]=JSON.stringify(f),setTimeout(i,10),!0}return c.cookie(a,JSON.stringify(b),{expires:d})?!0:!1}function i(){if(!j.gc||!j.gc_key||!k)return!1;var a=localStorage[j.gc_key]=parseInt(localStorage[j.gc_key])+1;if(a<j.gc)return!1;localStorage[j.gc_key]=0;var b=(new Date).getTime();for(var c in localStorage){var d=null;if(!j.prefix||0===c.indexOf(j.prefix)){try{d=JSON.parse(localStorage[c])}catch(e){}d&&d.t&&d.t<b&&localStorage.removeItem(c)}}}!c&&(a.rd=c={});var j={prefix:"",gc:2,gc_key:"_gc"},k=d();c.db=e}(window,document,window.rd),function(a,b,c,d){function e(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function f(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}function g(){var a,c=[];return arguments.length?(Array.prototype.push.apply(c,arguments),a=c.shift(),a&&a in g&&b.isFunction(g[a])?g[a].apply(this,c):!1):!1}function h(){i(),j("//cdn.yldbt.com/js/yieldbot.intent.js",k,l)}function i(){b(".ad").each(function(a,c){var d=b(c);d.data("id")&&d.empty().append(b("<div>").attr("id",d.data("id")))})}function j(a,c,d){b.ajax({url:a,dataType:"script",cache:!0}).done(c).fail(d)}function k(){var c=a.yieldbot;c.pub("d45f"),c.defineSlot("LB"),c.defineSlot("MR"),c.enableAsync(),c.go(),d.log("Yieldbot loaded"),a.OX_ads=[{slot_id:"537278266_728x90_ATF",auid:"537278266",vars:c.getSlotCriteria("LB")},{slot_id:"537278268_300x250_ATF",auid:"537278268",vars:c.getSlotCriteria("MR")},{slot_id:"537278269_300x250_BTF",auid:"537278269"},{slot_id:"537278267_728x90_BTF",auid:"537278267"}],b.extend(!0,s,a.OX_ads),j("//ox-d.junemedia.com/w/1.0/jstag",m,n)}function l(){d.error("Yieldbot failed to load")}function m(){d.log("OpenX JavaScript Loaded")}function n(){d.error("OpenX JavaScript failed to load")}function o(){d.debug("Ad refresh at "+new Date),i(),s.forEach(function(a){OX.load(a)})}function p(c){function d(b,d){return 0===arguments.length?e.forEach(function(a){return a.cb.call(a.ctx,c)}):void e.push({cb:b,ctx:d||a})}var e=[];switch(b.type(c)){case"string":return d;case"object":for(var f in c)c[f]=p(c[f]);return c;default:return null}}function q(){b("body>header .menu").on("touchstart selectstart click",e(function(a){a.preventDefault(),b(this).closest("header").toggleClass("open")},100,!0)),h()}var r=4e3,s=[],t=f(o,r);g.refreshAds=t,g.hook=p;var u,v=0;!function w(){return a[b]?(u&&clearInterval(u),b=a[b],a[c]&&a[c].q&&a[c].q.forEach(function(b){g.apply(a,b)}),a[c]=g,void b(q)):void(v++||(u=setInterval(w,16)))}()}(window,"jQuery","BR",window.rd),function(a,b,c,d,e,f,g){function h(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}}function i(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}function j(c){b(a).scrollTop(c||0)}function k(){var a,c=[];return arguments.length?(Array.prototype.push.apply(c,arguments),a=c.shift(),!a||!a in k||!b.isFunction(k[a])?!1:k[a].apply(this,c)):!1}function l(a){var c=!!rd.db("ineligible"),d=m();return d?void(c?(a&&b("#thanks h2").html("You have already entered today."),b(".frame").hide(),b("#thanks").show(),b(".carousel, #winners, .see_all_prizes").hide()):(b(".frame").hide(),b("#prize").show())):(b(".frame").hide(),b("#signup").show(),b("#login_email").trigger("focus"),void G.enterAnonymous())}function m(){return 1==rd.db("lis")}function n(){b.ajax({type:"POST",url:"/api/eligible",dataType:"json"}).done(function(a){return a&&a.status&&a.status==D?(z.show(),rd.db("lis",1,B),rd.db("user_id",a.user_id,B),void rd.db("ineligible",!a.eligible,1e3*a.midnight)):o()})}function o(){return b.ajax({type:"POST",url:"/api/logout",dataType:"json"}).done(function(){z.hide(),rd.db("lis",null),rd.db("user_id",null),rd.db("name",null),rd.db("ineligible",null),rd.cookie("sid",null),x=null,y.html(""),G.logout()}),!1}function p(){function a(a){return a.err?c(a.message):(A.html("Verification email sent."),void G.verifyRequest())}function c(){A.html(C)}return b.ajax({type:"POST",url:"/api/verify",dataType:"json"}).done(a).fail(c),!1}function q(a){var b=!r(a);H(),rd.debug("GTM "+a+": "+(b?"successfully matched":"FAILED to match against")+" a GTM event")}function r(c,d){function e(a,b){var c={event:a};return b!==!1&&rd.db("user_id")&&(c.userId=rd.db("user_id")),J.push(c)}function f(a){function c(){r.initializing=!1,r.initialized=!0}function d(a,b,c){r.initializing=!1,rd.error("GTM failed to load:",c)}return a?void(r.initializing||(r.initializing=!0,b.ajax({url:"//www.googletagmanager.com/gtm.js?id="+a,dataType:"script",cache:!0}).done(c).fail(d))):void rd.error('jds.gtm() called without an "id" param')}return r.initialized||"string"!==b.type(c)||0!==c.indexOf("GTM-")?e(c,d):(a[I]||(J=a[I]=[{"gtm.start":(new Date).getTime(),event:"gtm.js"}]),f(c))}function s(c){function d(a){return s.callback=a,i?(b(document).on("keyup",e),k.show(),f(),!1):(x=!0,rd.error("SolveMedia.fire executed, but ACPuzzle not ready :("),!1)}function e(a){return 27==a.which?(g(),!1):!0}function f(){i.focus_response_field()}function g(){b(document).off("keyup",e),b("#solvemedia").hide()}function h(a){var c=b(a.target);switch(c.attr("id")||c[0].nodeName){case"adcopy-link-refresh":i.reload(),f();break;case"adcopy-link-audio":i.change2audio(),f();break;case"adcopy-link-image":i.change2image(),f();break;case"adcopy-link-info":case"I":i.moreinfo();break;case"solvemedia":case"B":g();break;default:return!0}return!1}if(!c)return rd.warn("Could not initialize SolveMedia roadblock. No key provided."),!1;var i,j="//api.solvemedia.com/papi/_puzzle.js",k=b("#solvemedia");a.ACPuzzleInfo={protocol:window.location.protocol.match(/^https?:$/)?"":"http:",apiserver:"//api.solvemedia.com",mediaserver:"//api.solvemedia.com",magic:"u7WpnzA6KVaLL0XYMDopVg",chalapi:"ajax",chalstamp:1424984044,lang:"en",size:"standard",theme:"custom",type:"img",onload:null},b.ajax({url:j,dataType:"script",cache:!0}).fail(function(){rd.error("Failed to load SolveMedia JS: "+j)}).done(function(){i=a.ACPuzzle,i.create(c)}),k.on("click",h),k.find("form").on("submit",{success:function(){x=!0,g(),"function"==b.type(s.callback)&&s.callback()},fail:function(){return i.reload(),!1}},v),s.fire=d}function t(){function a(){var a=u.position(),b=a&&a.left+p.scrollLeft();k=u.width(),g=b+k,h=o.width(),j=g-h+0,l=Math.round(h/k)}function c(){var a=p.scrollLeft()-.63*h;0>=a?(a=0,o.addClass(m),o.removeClass(n)):o.removeClass(m),p.animate({scrollLeft:a},400),G.slideshow()}function d(){var a=p.scrollLeft()+.63*h;a>=j?(a=j+1,o.addClass(n),o.removeClass(m)):o.removeClass(n),p.animate({scrollLeft:a},400),G.slideshow()}function e(){var a=p.scrollLeft();a>=j?o.addClass(n):0>=a?o.addClass(m):o.removeClass(m).removeClass(n);for(var c=Math.round(a/k),d=1>=c?0:c-1,e=d+l+2,f=d;e>=f;f++){var g=b(t[f]);if(g.length&&!g.data("loaded")){var h=g.find("img");h.attr("src",h.data("src")).data("src",!1).removeClass("ajax-loader"),g.addClass("loaded").data("loaded",!0)}}}function f(){a()}var g,h,j,k,l,m="flush_left",n="flush_right",o=b(".carousel"),p=o.find(".wrap"),q=o.find(".prev"),r=o.find(".next"),s=o.find(".today"),t=p.children(),u=b(t[t.length-1]);if(a(),o.length){var v,w=s.position();v=w?w.left+k/2-h/2:0,p.scrollLeft(v),e(),q.on("selectstart touchstart",i(c,450)),r.on("selectstart touchstart",i(d,450)),p.on("scroll",i(e,32)),b("window").on("resize",f)}}function u(){function a(a){a=parseInt(a),f.attr("src",i[k[a-1]]),g.html(j[k[a-1]]),e.removeClass("cur"+m).addClass("cur"+a),m=a,G.slideshow()}function c(b){b.preventDefault(),b.stopPropagation(),a(1>=m?l:m-1)}function d(b){b.preventDefault(),b.stopPropagation(),a(m>=l?1:m+1)}var e=b(".prize"),f=e.find("img"),g=b(e.find("p")[0]),i={1:f.attr("src")},j={1:g.html()},k=[1],l=1,m=1;if(e.length){var n;(n=f.data("img2"))&&(i[2]=n),(n=f.data("img3"))&&(i[3]=n),(n=g.data("desc2"))&&(j[2]=n),(n=g.data("desc3"))&&(j[3]=n);for(var o=2;3>=o;o++)(i[o]||j[o])&&(k.push(o),i[o]||(i[o]=i[o-1]),j[o]||(j[o]=j[o-1]));if(1!=(l=k.length)){e.addClass("slideshow").append(b('<b class="prev">').on("selectstart touchstart",h(c,100,!0))).append(b('<b class="next">').on("selectstart touchstart",h(d,100,!0)));for(var p=b('<div class="dots">'),o=1;l>=o;o++)p.append(b("<i>").data("cur",o));e.addClass("cur1").append(p),p.on("touchstart selectstart","i",h(function(){a(b(this).data("cur"))},100,!0))}}}function v(a){function c(){l.removeClass("on"),i.removeClass("loading"),j.attr("disabled",null)}function d(a){if(c(),b(".logo").trigger("focus").trigger("blur"),!a||!1 in a||a.status!==D){switch(a.status){case E:o();break;case F:k.roadblock(function(){i.trigger("submit")})}return m.html(a.message||C).show(),g(a)}return f(a)}function e(){return c(),b(".logo").trigger("focus"),m.html(C).show(),g()}a.preventDefault();var f=a.data&&a.data.success||function(){},g=a.data&&a.data.fail||function(){},h=a.data&&a.data.prereq||function(){return!0},i=v.$form=b(this).addClass("loading"),j=v.$submit=i.find('input[type="submit"]').attr("disabled","disabled"),l=i.find("loader").addClass("on"),m=v.$alert=i.find(".alert").empty().hide();return h(a)?(b.ajax({type:"POST",url:i.attr("action"),data:i.serialize(),dataType:"json"}).done(d).fail(e),!1):(c(),!1)}function w(){b("#login_form").on("submit",{success:function(a){return j(0),x=null,rd.db("lis",1,B),rd.db("user_id",a.user_id,B),rd.db("name",a.name,B),y.html(a.name),z.show(),G.login(),a.eligible?l():(rd.db("ineligible",!0,1e3*a.midnight),l(!0),G.enterDuplicate()),!1},fail:function(){G.loginFail()}},v),b("#signup_form").on("submit",{success:function(a){return j(0),x=null,rd.db("lis",1,B),rd.db("user_id",a.user_id,B),a.name&&rd.db("name",a.name,B),y.html(rd.db("name")),z.show(),v.$form.trigger("reset"),v.$form.hasClass("profile")?(G.profileUpdate(),window.location.href=window.location.href):(G.signup(),l()),!1},fail:function(){G.signupFail()}},v),b("#forgot_form").on("submit",{success:function(a){return v.$alert.show().html(a.message),v.$form.trigger("reset"),v.$form.find("fieldset.login").hide(),v.$form.find("p").hide(),v.$submit.hide(),v.$form.find(".forgot_close").html("Dismiss"),G.forgot(),!1}},v),b("#reset_form").on("submit",{success:function(a){return j(0),v.$alert.show().html(a.message),v.$form.trigger("reset"),v.$form.find("fieldset, input").hide(),v.$form.find(".success").show(),G.reset(),!1}},v),b("#prize_form").on("submit",{prereq:function(){return m()?rd.db("ineligible")?(l(!0),G.enterDuplicate(),!1):!0:(l(),!1)},success:function(a){j(0),x=null,rd.db("ineligible",!0,1e3*a.midnight),l(),G.enter()}},v),z=b(".account"),y=b(z.find("a")[0]),y.html(rd.db("name")),b(".logout").on("click",o),b("a.forgot").on("click",function(){b("#signup").addClass("forgot"),b("#login_form").find(".alert").empty(),b("#forgot_email").trigger("focus")}),b("a.forgot_close").on("click",function(){b("#signup").removeClass("forgot");var a=b("#forgot_form");a.trigger("reset"),a.find("fieldset, input").show(),a.find("p").show(),a.find(".success").hide(),a.find(".alert").empty(),b("#login_email").trigger("focus")}),A=b(".verify"),A.find("a").on("click",p),t(),u(),k.roadblock=s.fire,m()&&(z.show(),rd.db("ineligible")||n())}d=a[d];var x,y,z,A,B=31536e6,C="An unexpected error has occurred. Please try again.",D=1,E=3,F=9,G=d.hook({enterAnonymous:"enterAnonymous",signup:"signup",signupFail:"signupFail",login:"login",loginFail:"loginFail",enter:"enter",enterDuplicate:"enterDuplicate",enterFail:"enterFail",forgot:"forgot",reset:"reset",verify:"verify",verifyRequest:"verifyRequest",profileUpdate:"profileUpdate",logout:"logout",slideshow:"slideshow"}),H=d.refreshAds;for(var g in G)G[g](q);var I="dataLayer",J=a[I];k.gtm=r,k.solvemedia=s,g=0,(e=function(){return a[b]?(f&&clearInterval(f),b=a[b],a[c]&&a[c].q&&a[c].q.forEach(function(b){k.apply(a,b)}),a[c]=k,void b(w)):void(!g++&&(f=setInterval(e,16)))})()}(window,"jQuery","jds","BR");